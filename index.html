<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TexasDentalHub | Houston Metro Dentists</title>
  <meta name="description" content="Find trusted general and family dentists in Houston, Katy, Sugar Land, Richmond, Rosenberg, The Woodlands, and Spring, Texas." />

  <style>
    :root{--bg:#eef5ff;--card:#ffffff;--text:#0f172a;--muted:#475569;--border:rgba(15,23,42,.10);--shadow:0 18px 40px rgba(2,6,23,.10);--shadow2:0 10px 25px rgba(2,6,23,.12);--accent:#0b5ed7;--accentSoft:#e6f0ff;--radius:18px}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    .topbar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);z-index:10}
    .topbar-inner{max-width:1100px;margin:0 auto;padding:14px 18px;display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;font-size:18px;color:var(--accent)}
    .brand span{font-size:22px}
    .nav button{background:none;border:none;padding:8px 12px;border-radius:999px;cursor:pointer;font-size:14px}
    .nav button.active{background:rgba(37,99,235,.12);color:#1e88ff}
    .container{max-width:1100px;margin:0 auto;padding:22px 18px 60px}
    .hero{background:linear-gradient(180deg,#fff,var(--accentSoft));border:1px solid var(--border);border-radius:18px;padding:28px;box-shadow:var(--shadow)}
    .hero h1{margin:0 0 6px 0;font-size:26px}
    .hero p{margin:0;color:var(--muted)}
    .section{margin-top:28px}
    .section h2{display:flex;align-items:center;gap:8px;font-size:20px}
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:600px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:var(--shadow2);display:flex;flex-direction:column;transition:transform .15s ease, box-shadow .15s ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(2,6,23,.18)}
    .card.featured{border:2px solid var(--accent);background:linear-gradient(180deg,#ffffff,#f0f6ff)}
    .badge{background:var(--accent);color:#fff;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:600;align-self:flex-start;display:flex;align-items:center;gap:6px}
    .address{color:var(--muted);font-size:14px;display:flex;gap:6px;margin:6px 0 10px 0}
    .btn{margin-top:auto;padding:10px 14px;border-radius:14px;border:none;background:var(--accent);color:#fff;font-weight:600;cursor:pointer;text-align:center;display:flex;align-items:center;justify-content:center;gap:6px}
    .page{display:none}.page.active{display:block}
    .footer{text-align:center;color:var(--muted);font-size:13px;padding:20px}
    #leadModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1000;align-items:center;justify-content:center}
    #leadModal .modal{background:#fff;max-width:420px;width:90%;border-radius:16px;padding:22px}
    #leadModal input,#leadModal textarea{width:100%;padding:10px;margin:8px 0;border-radius:10px;border:1px solid var(--border)}
  </style>
</head>
<body>
<div class="topbar">
  <div class="topbar-inner">
    <div class="brand"><span>ü¶∑</span>TexasDentalHub</div>
    <div class="nav">
      <button class="active" data-city="houston">Houston</button>
      <button data-city="katy">Katy</button>
      <button data-city="sugarland">Sugar Land</button>
      <button data-city="richmond">Richmond</button>
      <button data-city="rosenberg">Rosenberg</button>
      <button data-city="woodlands">The Woodlands</button>
      <button data-city="spring">Spring</button>
    </div>
  </div>
</div>

<div class="container">
  <div id="houston" class="page active"></div>
  <div id="katy" class="page"></div>
  <div id="sugarland" class="page"></div>
  <div id="richmond" class="page"></div>
  <div id="rosenberg" class="page"></div>
  <div id="woodlands" class="page"></div>
  <div id="spring" class="page"></div>
</div>

<div class="footer">¬© 2026 TexasDentalHub</div>

<div id="leadModal">
  <div class="modal">
    <h3>Request Appointment</h3>
    <p id="leadClinic" style="font-size:14px;color:#475569"></p>
    <form onsubmit="submitLead(event)">
      <input required placeholder="Your Name" />
      <input required type="email" placeholder="Email" />
      <input required placeholder="Phone" />
      <textarea required placeholder="Preferred time / message"></textarea>
      <button class="btn" type="submit">Submit Request</button>
      <button type="button" onclick="closeLead()" style="margin-left:10px">Cancel</button>
    </form>
  </div>
</div>

<script>
let DATA = {};

const DATA_URL =
  "https://script.google.com/macros/s/AKfycbxUQduaVzN-YlniJvAJ9M8oIn1Yw6lWWdMDRxHBLSTs65YIX7C5VJi6MZlvXS3XJSe-Yg/exec?action=clinics";

fetch(DATA_URL)
  .then(res => res.json())
  .then(json => {
    DATA = json;

    // Render all cities
    Object.keys(DATA).forEach(renderCity);

    // Activate Houston by default
    document.getElementById("houston").classList.add("active");
  })
  .catch(err => {
    console.error("Failed to load clinic data", err);
    alert("Unable to load clinic listings at this time.");
  });


// --------------- RENDERING ----------------
function renderCity(key){
  const city = DATA[key];
  const container = document.getElementById(key);

  // ‚úÖ HARD SAFETY CHECK (this prevents the crash)
  if (!city || !container) {
    console.warn("Skipping city render:", key);
    return;
  }

  container.innerHTML = `
    <div class="hero">
      <h1>General & Family Dentists in ${city.label}</h1>
      <p>
        Looking for a trusted dentist in ${city.label}? TexasDentalHub helps you
        discover verified general and family dental clinics across ${city.label}
        and nearby areas. Browse local providers, call featured clinics directly,
        or request an appointment online with confidence.
      </p>

      <ul style="margin-top:14px;color:#475569;line-height:1.6;padding-left:18px;">
        <li>‚úÖ Verified local dental clinics in and around ${city.label}</li>
        <li>üìû Call featured clinics directly ‚Äî no middlemen</li>
        <li>üóìÔ∏è Request appointments online in seconds</li>
        <li>ü¶∑ General, family, cosmetic & emergency care options</li>
        <li>üìç Focused on your city ‚Äî not a national spam directory</li>
      </ul>
    </div>

    <div class="section">
      <h2>‚≠ê Featured Clinics</h2>
      <div class="grid">
        ${city.featured.map(c => card(c, true)).join("")}
      </div>
    </div>

    <div class="section">
      <h2>üè• All Clinics</h2>
      <div class="grid">
        ${city.clinics.map(c => card(c, false)).join("")}
      </div>
    </div>
  `;
}


// --------------- LEAD MODAL ----------------
function openLead(name){
  document.getElementById('leadClinic').innerText = `Clinic: ${name}`;
  document.getElementById('leadModal').style.display = 'flex';
}

function closeLead(){
  document.getElementById('leadModal').style.display = 'none';
}

function submitLead(e){
  e.preventDefault();
  const form = e.target;

  const data = {
    clinic: document.getElementById('leadClinic').innerText.replace('Clinic: ', ''),
    name: form.querySelector('input[placeholder="Your Name"]').value,
    email: form.querySelector('input[type="email"]').value,
    phone: form.querySelector('input[placeholder="Phone"]').value,
    message: form.querySelector('textarea').value,
    city: document.querySelector('.nav button.active').innerText,
    timestamp: new Date().toISOString()
  };

  fetch("https://script.google.com/macros/s/AKfycbxUQduaVzN-YlniJvAJ9M8oIn1Yw6lWWdMDRxHBLSTs65YIX7C5VJi6MZlvXS3XJSe-Yg/exec", {
    method: "POST",
    mode: "no-cors",
    body: JSON.stringify(data)
  });

  alert("Appointment request submitted. We will contact you shortly.");
  form.reset();
  closeLead();
}

// --------------- NAV ----------------
const buttons = document.querySelectorAll('.nav button');
buttons.forEach(btn => btn.onclick = () => {
  buttons.forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(btn.dataset.city).classList.add('active');
});
</script>
</body>
</html>
